@model YastCleaner.Web.ViewModels.TrabajadorViewModel

@{
    ViewData["Title"] = "Detalle del Trabajador";
}

@section Styles {
    <link rel="stylesheet" href="~/css/DetalleTrabajador.css" />
}

<div class="detalle-trabajador-container">
    <!-- Header de la página -->
    <div class="page-header">
        <div class="header-content">
            <div class="trabajador-avatar">
                <i class="fas fa-user-hard-hat"></i>
            </div>
            <div class="trabajador-info">
                <h1 class="page-title">@Model.Nombre @Model.Apellidos</h1>
                <p class="page-subtitle">Información completa del trabajador</p>
                <div class="trabajador-meta">
                    <span class="meta-item">
                        <i class="fas fa-id-card"></i>
                        DNI: @Model.Dni
                    </span>
                    <span class="meta-item">
                        <i class="fas fa-calendar-alt"></i>
                        Registrado: @Model.FechaRegistro.ToString("dd/MM/yyyy")
                    </span>
                </div>
            </div>
        </div>
        <div class="header-actions">
            <span class="estado-trabajador activo">
                <i class="fas fa-circle"></i>
                Activo
            </span>
        </div>
    </div>

    <div class="detalle-content">
        <div class="row">
            <!-- Información Personal -->
            <div class="col-lg-6">
                <div class="info-card">
                    <div class="card-header-custom">
                        <i class="fas fa-user me-2"></i>
                        <h3>Información Personal</h3>
                    </div>
                    <div class="card-body-custom">
                        <div class="info-grid">
                            <div class="info-item">
                                <div class="info-icon">
                                    <i class="fas fa-id-badge"></i>
                                </div>
                                <div class="info-content">
                                    <label>ID del Trabajador</label>
                                    <span class="info-value">@Model.TrabajadorId</span>
                                </div>
                            </div>

                            <div class="info-item">
                                <div class="info-icon">
                                    <i class="fas fa-signature"></i>
                                </div>
                                <div class="info-content">
                                    <label>Nombres</label>
                                    <span class="info-value">@Model.Nombre</span>
                                </div>
                            </div>

                            <div class="info-item">
                                <div class="info-icon">
                                    <i class="fas fa-signature"></i>
                                </div>
                                <div class="info-content">
                                    <label>Apellidos</label>
                                    <span class="info-value">@Model.Apellidos</span>
                                </div>
                            </div>

                            <div class="info-item">
                                <div class="info-icon">
                                    <i class="fas fa-address-card"></i>
                                </div>
                                <div class="info-content">
                                    <label>DNI</label>
                                    <span class="info-dni">@Model.Dni</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Información de Contacto -->
            <div class="col-lg-6">
                <div class="info-card">
                    <div class="card-header-custom bg-primary">
                        <i class="fas fa-address-book me-2"></i>
                        <h3>Información de Contacto</h3>
                    </div>
                    <div class="card-body-custom">
                        <div class="info-grid">
                            <div class="info-item">
                                <div class="info-icon">
                                    <i class="fas fa-map-marker-alt"></i>
                                </div>
                                <div class="info-content">
                                    <label>Dirección</label>
                                    <span class="info-value">@Model.Direccion</span>
                                </div>
                            </div>

                            <div class="info-item">
                                <div class="info-icon">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <div class="info-content">
                                    <label>Correo Electrónico</label>
                                    <span class="info-email">@Model.Email</span>
                                </div>
                            </div>

                            <div class="info-item">
                                <div class="info-icon">
                                    <i class="fas fa-calendar-plus"></i>
                                </div>
                                <div class="info-content">
                                    <label>Fecha de Registro</label>
                                    <span class="info-value">@Model.FechaRegistro.ToString("dd/MM/yyyy")</span>
                                </div>
                            </div>

                            <div class="info-item">
                                <div class="info-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="info-content">
                                    <label>Tiempo en la Empresa</label>
                                    @{
                                        var tiempoEnEmpresa = DateTime.Now - Model.FechaRegistro;
                                        var años = tiempoEnEmpresa.Days / 365;
                                        var meses = (tiempoEnEmpresa.Days % 365) / 30;
                                    }
                                    <span class="info-value">@años año(s) y @meses mes(es)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Acciones -->
        <div class="acciones-section">
            <div class="acciones-header">
                <i class="fas fa-cogs me-2"></i>
                <h3>Acciones</h3>
            </div>
            <div class="acciones-grid">
                <a asp-action="Trabajadores" class="btn-accion btn-volver">
                    <i class="fas fa-arrow-left me-2"></i>
                    Volver al Listado
                </a>

                <a asp-action="Actualizar" asp-controller="Trabajador" asp-route-id="@Model.TrabajadorId" class="btn-accion btn-editar">
                    <i class="fas fa-edit me-2"></i>
                    Editar Trabajador
                </a>
                <form asp-action="Eliminar" asp-controller="Trabajador" asp-route-id="@Model.TrabajadorId" method="post" class="d-inline eliminar-form">
                    <button type="submit" class="btn-accion btn-eliminar" onclick="return confirmarEliminacion(this)">
                        <i class="fas fa-trash me-2"></i>
                        Eliminar Trabajador
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Modal de Confirmación de Eliminación -->
<div class="modal-confirmacion" id="modalEliminar">
    <div class="modal-content">
        <div class="modal-header warning">
            <i class="fas fa-exclamation-triangle me-2"></i>
            <h3>Confirmar Eliminación</h3>
            <button type="button" class="btn-cerrar" onclick="cerrarModal()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="advertencia-eliminacion">
                <h4>¿Está seguro que desea eliminar este trabajador?</h4>
                <div class="detalles-eliminacion">
                    <div class="detalle-item">
                        <strong>Trabajador:</strong> @Model.Nombre @Model.Apellidos
                    </div>
                    <div class="detalle-item">
                        <strong>DNI:</strong> @Model.Dni
                    </div>
                    <div class="detalle-item">
                        <strong>Fecha de Registro:</strong> @Model.FechaRegistro.ToString("dd/MM/yyyy")
                    </div>
                </div>
                <div class="advertencia-texto">
                    <i class="fas fa-exclamation-circle text-warning me-2"></i>
                    <span>Esta acción no se puede deshacer y afectará los pedidos asociados a este trabajador.</span>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn-modal btn-cancelar" onclick="cerrarModal()">
                <i class="fas fa-times me-2"></i>
                Cancelar
            </button>
            <form asp-action="Eliminar" asp-controller="Trabajador" asp-route-id="@Model.TrabajadorId" method="post" id="formEliminar">
                <button type="submit" class="btn-modal btn-confirmar">
                    <i class="fas fa-check me-2"></i>
                    Sí, Eliminar
                </button>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function confirmarEliminacion(button) {
            event.preventDefault();
            document.getElementById('modalEliminar').style.display = 'flex';
            return false;
        }

        function cerrarModal() {
            document.getElementById('modalEliminar').style.display = 'none';
        }

        document.querySelector('.btn-confirmar').addEventListener('click', function() {
            document.getElementById('formEliminar').submit();
        });

        // Efectos visuales
        document.addEventListener('DOMContentLoaded', function() {
            // Animación de las barras de progreso
            const progressBars = document.querySelectorAll('.progress-bar');
            progressBars.forEach(bar => {
                const width = bar.style.width;
                bar.style.width = '0';
                setTimeout(() => {
                    bar.style.width = width;
                }, 500);
            });

            // Efecto hover en tarjetas
            const cards = document.querySelectorAll('.info-card, .stats-card, .additional-card');
            cards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-5px)';
                });
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });
        });
    </script>
}